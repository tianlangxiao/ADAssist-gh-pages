<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>匹兹堡睡眠指数量表</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css">
    <link href="../css/forScale.css" rel="stylesheet">
    <link href="../css/scale_style.css" rel="stylesheet">
</head>
<body>
<h2 id="pname"></h2>
<form id="form1" class="timu">
    <p>填写时间:</p>
    <input type="date" id="date" name="date">

    <ol>

        <li><p>总的来说您的睡眠质量如何?</p>

            <input class="radio_type" type="radio" name="pittsburgh1" value="4">很好
            <input class="radio_type" type="radio" name="pittsburgh1" value="3">较好
            <input class="radio_type" type="radio" name="pittsburgh1" value="2">较差
            <input class="radio_type" type="radio" name="pittsburgh1" value="1">很差

        </li>
        <li><p>晚上您通常几点钟上床睡觉?</p>

            <input class="radio_type" type="radio" name="pittsburgh2" value="4">21点之前
            <input class="radio_type" type="radio" name="pittsburgh2" value="3">21-22点
            <input class="radio_type" type="radio" name="pittsburgh2" value="2">22-23点
            <input class="radio_type" type="radio" name="pittsburgh2" value="1">其他
            <div class="custom-control custom-control-inline">
              <select class="custom-select" name="pittsburgh21">
                <option selected>无</option>
                <option value="0">0点</option>
                <option value="1">1点</option>
                <option value="2">2点</option>
                <option value="3">3点</option>
                <option value="4">4点</option>
                <option value="5">5点</option>
                <option value="6">6点</option>
                <option value="7">7点</option>
                <option value="8">8点</option>
                <option value="9">9点</option>
                <option value="10">10点</option>
                <option value="11">11点</option>
                <option value="12">12点</option>
                <option value="13">13点</option>
                <option value="14">14点</option>
                <option value="15">15点</option>
                <option value="16">16点</option>
                <option value="17">17点</option>
                <option value="18">18点</option>
                <option value="19">19点</option>
                <option value="20">20点</option>
                <option value="21">21点</option>
                <option value="22">22点</option>
                <option value="23">23点</option>
              </select>
            </div>
        </li>
        <li><p>早上您通常几点钟起床?</p>

            <input class="radio_type" type="radio" name="pittsburgh3" value="4">6点之前
            <input class="radio_type" type="radio" name="pittsburgh3" value="3">6-7点
            <input class="radio_type" type="radio" name="pittsburgh3" value="2">7-8点
            <input class="radio_type" type="radio" name="pittsburgh3" value="1">其他
            <div class="custom-control custom-control-inline">
              <select class="custom-select" name="pittsburgh31">
                <option selected>无</option>
                <option value="0">0点</option>
                <option value="1">1点</option>
                <option value="2">2点</option>
                <option value="3">3点</option>
                <option value="4">4点</option>
                <option value="5">5点</option>
                <option value="6">6点</option>
                <option value="7">7点</option>
                <option value="8">8点</option>
                <option value="9">9点</option>
                <option value="10">10点</option>
                <option value="11">11点</option>
                <option value="12">12点</option>
                <option value="13">13点</option>
                <option value="14">14点</option>
                <option value="15">15点</option>
                <option value="16">16点</option>
                <option value="17">17点</option>
                <option value="18">18点</option>
                <option value="19">19点</option>
                <option value="20">20点</option>
                <option value="21">21点</option>
                <option value="22">22点</option>
                <option value="23">23点</option>
              </select>
            </div>
        </li>
        <li><p>从上床到入睡您通常需要多久?</p>

            <input class="radio_type" type="radio" name="pittsburgh4" value="4">少于15分钟
            <input class="radio_type" type="radio" name="pittsburgh4" value="3">6-30分钟
            <input class="radio_type" type="radio" name="pittsburgh4" value="2">30-60分钟
            <input class="radio_type" type="radio" name="pittsburgh4" value="1">超过60分钟

        </li>
        <li><p>您入睡困难（30分钟内不能入睡）?</p>

            <input class="radio_type" type="radio" name="pittsburgh5" value="4">无
            <input class="radio_type" type="radio" name="pittsburgh5" value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh5" value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh5" value="1">多于3次/周

        </li>
        <li><p>您每晚通常实际睡眠多少小时（不等于卧床时间）?</p>

            <input class="radio_type" type="radio" name="pittsburgh6" value="4">超过7小时
            <input class="radio_type" type="radio" name="pittsburgh6" value="3">6-7小时
            <input class="radio_type" type="radio" name="pittsburgh6" value="2">5-6小时
            <input class="radio_type" type="radio" name="pittsburgh6" value="1">其他具体时间
            <div class="custom-control custom-control-inline">
              <select class="custom-select" name="pittsburgh61">
                <option selected>无</option>
                <option value="0">0点</option>
                <option value="1">1点</option>
                <option value="2">2点</option>
                <option value="3">3点</option>
                <option value="4">4点</option>
                <option value="5">5点</option>
                <option value="6">6点</option>
                <option value="7">7点</option>
                <option value="8">8点</option>
                <option value="9">9点</option>
                <option value="10">10点</option>
                <option value="11">11点</option>
                <option value="12">12点</option>
                <option value="13">13点</option>
                <option value="14">14点</option>
                <option value="15">15点</option>
                <option value="16">16点</option>
                <option value="17">17点</option>
                <option value="18">18点</option>
                <option value="19">19点</option>
                <option value="20">20点</option>
                <option value="21">21点</option>
                <option value="22">22点</option>
                <option value="23">23点</option>
              </select>
            </div>
        </li>
        <li><p>您是否夜间易醒或早醒?</p>

            <input class="radio_type" type="radio" name="pittsburgh7" value="4">无
            <input class="radio_type" type="radio" name="pittsburgh7" value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh7" value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh7" value="1">多于3次/周

        </li>
        <li><p>您是否夜间去厕所?</p>

            <input class="radio_type" type="radio" name="pittsburgh8" value="4" >无
            <input class="radio_type" type="radio" name="pittsburgh8" value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh8" value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh8" value="1">多于3次/周

        </li>
        <li><p>您睡觉时是否感觉呼吸不畅?</p>

            <input class="radio_type" type="radio" name="pittsburgh9" value="4">无
            <input class="radio_type" type="radio" name="pittsburgh9" value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh9" value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh9" value="1">多于3次/周

        </li>
        <li><p>您睡觉时是否咳嗽或鼾声高?</p>

            <input class="radio_type" type="radio" name="pittsburgh10" value="4">无
            <input class="radio_type" type="radio" name="pittsburgh10" value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh10" value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh10" value="1">多于3次/周

        </li>
        <li><p>您睡觉时是否感觉冷?</p>

            <input class="radio_type" type="radio" name="pittsburgh11" value="4">无
            <input class="radio_type" type="radio" name="pittsburgh11" value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh11" value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh11" value="1">多于3次/周

        </li>
        <li><p>您睡觉时是否感觉热?</p>

            <input class="radio_type" type="radio" name="pittsburgh12" value="4">无
            <input class="radio_type" type="radio" name="pittsburgh12" value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh12" value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh12" value="1">多于3次/周

        </li>
        <li><p>您睡觉时是否做恶梦?</p>

            <input class="radio_type" type="radio" name="pittsburgh13"value="4" >无
            <input class="radio_type" type="radio" name="pittsburgh13"value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh13"value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh13"value="1">多于3次/周

        </li>
        <li><p>您睡觉时是否疼痛不适?</p>

            <input class="radio_type" type="radio" name="pittsburgh14"value="4" >无
            <input class="radio_type" type="radio" name="pittsburgh14"value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh14"value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh14"value="1">多于3次/周

        </li>
        <li><p>您是否有其它影响睡眠的事情?</p>

            <input class="radio_type" type="radio" name="pittsburgh15"value="4" >无
            <input class="radio_type" type="radio" name="pittsburgh15"value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh15"value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh15"value="1">多于3次/周

        </li>
        <li><p>您常感到困倦吗?</p>

            <input class="radio_type" type="radio" name="pittsburgh16"value="4" >无
            <input class="radio_type" type="radio" name="pittsburgh16"value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh16"value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh16"value="1">多于3次/周

        </li>
        <li><p>您做事情的精力不足吗?</p>

            <input class="radio_type" type="radio" name="pittsburgh17"value="4" >无
            <input class="radio_type" type="radio" name="pittsburgh17"value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh17"value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh17"value="1">多于3次/周
        </li>
        <li><p>您使用药物催眠吗?</p>
            <input class="radio_type" type="radio" name="pittsburgh18"value="4" >无
            <input class="radio_type" type="radio" name="pittsburgh18"value="3">少于1次/周
            <input class="radio_type" type="radio" name="pittsburgh18"value="2">约1-2次/周
            <input class="radio_type" type="radio" name="pittsburgh18"value="1">多于3次/周
        </li>
    </ol>
    <button id="formSubmit" type="submit">提交</button>
    <br>
    <br>
    <br>
</form>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"></script>
<script src="../js/common.js"></script>
<script src="../js/scale_style.js"></script>

<script type="text/javascript">

    var formType = 3;
    var tid = getRequest().tid;
    var pid = getRequest().pid;

    $(function () {
        var pn = $.cookie('pname');
        $("#pname").text(pn);

        let formID = "#form1";
        let autoUploadTime = 20 * 1000;

        let init = () => {
            initData(tid, pid, formType, formID);

            window.setInterval(function () {
                // console.info("数据次数:")
                initForm(tid, pid, formType, formID);
            }, autoUploadTime);
        }

        if (pid) {
            getUnfinished(pid, formType, (lastTid) => {
                if (lastTid) {
                    tid = lastTid;
                }
            })
        }

        if (tid) {
            getData(tid, formType, formID, (data) => {
                console.debug(data);
                pid = data.pid;
                init();
            });
        } else {
            getId(pid, formType, formID, (newTid) => {
                console.debug('Get new tid: ' + newTid);
                tid = newTid
                init();
            });
        };
    });

</script>
</body>
</html>
