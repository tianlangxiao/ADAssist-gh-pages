<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/zhuyeshow.css">
</head>
<body>

<h2>一般情况</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody1"></tbody>
</table>

<p id="p1"></p>
<h2>认知能力自评表</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody2"></tbody>
</table>
<p id="p2"></p>

<h2>匹兹堡睡眠指数量表</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody3"></tbody>
</table>
<h2>认知功能变化评估量表(本人)</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody4"></tbody>
</table>
<h2>老年认知功能减退知情者问卷</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody5"></tbody>
</table>
<h2>认知功能变化评估(询问家人或照料者)</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody6"></tbody>
</table>
<h2>日常生活能力表</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody7"></tbody>
</table>
<h2>简易精神状态检查表</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody8"></tbody>
</table>
<h2>蒙特利尔认知评估表</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody9"></tbody>
</table>
<h2>认知域</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody10"></tbody>
</table>
<h2>汉密尔顿抑郁量表</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody11"></tbody>
</table>
<h2>神经精神科问卷</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody12"></tbody>
</table>
<h2>CDR</h2>
<table class="layui-table">
    <thead>
    <tr>
        <th>编号</th>
        <th>填表时间</th>
        <th>原始数据</th>
        <th>统计结果</th>
    </tr>
    </thead>
    <tbody id="tbody13"></tbody>
</table>

<!-- 全局js -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"></script>
<script src="http://cdn.bootcss.com/blueimp-md5/1.1.0/js/md5.js"></script>
<script src="../js/common.js"></script>

<script src="../js/zhuyeshow.js"></script>


<script type="text/javascript">

    $(function() {
        var param = getRequest();
        var pid = param.pid;

        typePage = {
            "1": "1yiban.html",
            "2": "2renzhinengli.html",
            "3": "3pizibao.html",
            "4": "4renzhibianhua.html",
            "5": "5renzhijiantui.html",
            "6": "6renzhibianhuajia.html",
            "7": "7richang.html",
            "8": "8jianmingjingshen.html",
            "9": "9mengtelier.html",
            "10": "10renzhiyu.html",
            "11": "11hanmierdun.html",
            "12": "12jingshen.html",
            "13": "13cdr.html"
        }

        function mklist(type, dataPage, statPage = "showbar3.html") {
            let map = {
                "pid": pid,
                "type": parseInt(type)
            };
            $.ajax({
                url: "http://par.ict.ac.cn:10000/3/survey/list/find",
                type: "POST",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                data: JSON.stringify(map),
                success: function (data) {
                    var list = data.result;
                    // console.debug(data)
                    if (list && list !== 'na') {
                        var html = "";
                        for (var i = 0; i < list.length; i++) {
                            //item = JSON.parse(list[i].data);
                            // console.log("user item", {data: list[i]});
                            // console.log("user id" + list[i].id);
                            html += '<tr>' +
                                '<td><a class="J_menuItem" >' + (i + 1) + '</a></td>' +
                                '<td><a class="J_menuItem" ">' + list[i].date + '</a></td>' +
                                '<td><a class="layui-btn layui-btn-xs" href="' +
                                    dataPage + '?tid=' + list[i].id + '">' + "原数据" + '</a></td> ' +
                                '<td><a class="layui-btn layui-btn-xs" href="' +
                                    statPage + '?tid=' + list[i].id + '">' + "统计结果" + '</a></td> ' +
                                '</tr>';
                        }
                        $("#tbody" + type.toString()).html(html);
                    }
                }
            });
        }

        for(let i = 1; i <= 13; i++) {
            mklist(i, typePage[i.toString()], i === 1 ? "showbar.html" : "showbar3.html");
        }
    });

</script>
</body>
</html>
